define("wpp.admin.tools",["wpp.model","jquery","knockout","knockout.mapping"],function(){return function(){var a=require("knockout"),b=require("knockout.mapping"),c=require("wpp.model"),d={_objectMap:function(a,b){var c=[];for(var d in a)c.push(b(a[d]));return c},attributes:{create:function(b){var c=d._objectMap(b.data,function(a){return a.new_item=!1,new d._attribute(a)});return a.observableArray(c)}},groups:{create:function(b){var c=d._objectMap(b.data,function(a){return a.new_item=!1,new d._group(a)});return a.observableArray(c)}},_group:function(b){var c=this;b=jQuery.extend(!0,{label:"New Group",slug:"new_group_tab_slug",edit_state:!1,reserved:!1,new_item:!0},"object"==typeof b?b:{});for(var d in b)"function"!=typeof b[d]&&(c[d]=a.observable(b[d]));c.delete_group=function(b){var d="Are you sure you want to remove group? All assigned attributes will be moved to Other.";window.confirm(d)&&(a.utils.arrayForEach(b.attributes(),function(a){a.group()===c.slug()&&a.group("wpp_main")}),b.groups.remove(this))},c.toggleEdit=function(b){if(jQuery('input[tab="tab_'+b.slug()+'"]').trigger("change"),c.edit_state(!c.edit_state()),c.edit_state())c.prevName=c.slug(),jQuery('input[tab="tab_'+b.slug()+'"]').focus().select();else{var d=!1;"object"==typeof wpp.settings_ui.view_model&&(d=wpp.settings_ui.view_model.global,c.slug()!==c.prevName&&a.utils.arrayForEach(d.attributes(),function(a){a.group()===c.prevName&&a.group(c.slug())})),""===jQuery.trim(c.label())&&c.label(c.prevName)}}},_attribute:function(b){var c=this;b=jQuery.extend(!0,{label:"New Attribute",slug:"new_attribute",group:"wpp_main",show_settings:!1,show_classifications:!1,classification_label:"Short Text",classification:"string",classification_settings:{},searchable:!1,sortable:!1,in_overview:!1,disabled:!1,search_predefined:"",admin_predefined:"",admin_input_type:"input",search_input_type:"input",show_admin_pre_values:!1,show_search_pre_values:!1,system:!1,reserved:!1,new_item:!0},"object"==typeof b?b:{});for(var d in b)"function"!=typeof b[d]&&(c[d]=a.observable(b[d]));c.show_admin_values=function(a,b){var c=["dropdown","multi_checkbox"],d=jQuery(b.target),e=d.parents(".wpp_collapsed").find(".wpp_admin_values");e.hide(),-1!==c.indexOf(d.val())&&e.show()},c.show_search_values=function(a,b){var c=["dropdown","multi_checkbox"],d=jQuery(b.target),e=d.parents(".wpp_collapsed").find(".wpp_search_values");e.hide(),-1!==c.indexOf(d.val())&&e.show()},c.toggle_settings=function(){c.show_settings(!c.show_settings())},c.toggle_classifications=function(a,b){b.stopPropagation(),c.show_classifications(!c.show_classifications())},c.click_inside=function(){return c.show_classifications(!1),!0},c.select_classification=function(b,d){d.stopPropagation(),c.classification(this.slug()),c.classification_label(this.label()),c.classification_settings(a.mapping.toJS(this.settings)),c.show_classifications(!1),jQuery(".wpp_predefined_input_type").trigger("change"),jQuery(".wpp_attribute_classification").trigger("change")}}},e=b.fromJS(c.settings._computed.data_structure,d);return e._group=d._group,e.add_data=function(a,b,c){"function"==typeof b?a.push(new b):"function"==typeof c[b]&&a.push(new c[b])},console.log("groups",e.groups()),console.log("attributes",e.attributes()),a.applyBindings(e,this),void 0}});